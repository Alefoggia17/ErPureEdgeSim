# Build on Ubuntu 18.04. Always define the image explicitly because defaults change over time.
image: ubuntu-18.04-amd64

environment:
  # Increase the minimum and maximum Java heap size by defining the environment variable _JAVA_OPTIONS.
  _JAVA_OPTIONS: "-Xms256m -Xmx1024m"
  # Reduce the output generated by Apache Maven.
  MAVEN_OPTS: "-Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn"

install:
  # Use OpenJDK 11.
  - sudo java_select adoptopenjdk-11-hotspot-amd64

build_script:
  # Build the software using Maven Wrapper, run all tests and the CheckStyle audit. -B stands for batch mode and
  # results in prettier output to the console.
  - ./mvnw verify -B


# We do not want to build git tags.
skip_tags: true

# Use integers as build versions (1, 2, 3, â€¦) instead of 1.0.X.
version: "{build}"